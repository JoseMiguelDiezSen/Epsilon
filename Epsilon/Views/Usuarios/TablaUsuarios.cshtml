@using Epsilon.ViewModels

@model IEnumerable<ViewUsuario>

<table class="table table-striped table-hover table-dark" style="border: 1px solid gainsboro; margin-top:50px !important;">
 
    <thead>
        <tr>
            <th scope="col" class="text-center" width="1%">#</th>
            <th scope="col">IDUSUARIO</th>
            <th scope="col">NOMBRE</th>
            <th scope="col">EMAIL</th>
            <th scope="col">TELEFONO</th>
            <th scope="col">FECHA ALTA</th>
            <th scope="col">OPERACIONES</th>
        </tr>
    </thead>

    <tbody id="idBodyTable">

        @if (Model.Count() > 0)
        {
            foreach (var usuario in Model)
            {
                <tr id="idFilaPeriodo_" class="text-center">
                    <td class="text-center">
                         <span class="fa fa-user"></span>
                    </td>
                    <td> @usuario.IdUsuario.ToString()</td>
                    <td> @usuario.Nombre?.ToString()</td>
                    <td> @usuario.Email?.ToString()</td>
                    <td> @usuario.Telefono.ToString()</td>
                    <td> @usuario.FechaAlta.ToShortDateString()</td>
          
                    @*  @if (DateTime.Now.Year == usuario.FechaAlta.Year)
                    { *@
                        <td>
                            <div aria-label="Basic Example">

                            <a class="btn btn-sm btn-outline-light" id="btnEditar" data-id="" onclick="jqGetModalUpdateUser(@(usuario.IdUsuario))">
                                <span class="fa fa-pencil"> </span>
                                </a>

                                <button class="btn btn-sm btn-outline-light" style="margin-left:5px;" id="btnEliminar" onclick="jqGetModalDeleteUser(@usuario.IdUsuario)">
                                <span class="fa fa-circle-xmark"> </span>
                                </button>

                            <button class="btn btn-sm btn-outline-light"
                                    onclick="toggleDetail(@usuario.IdUsuario)">
                                <i class="fa-solid fa-square-caret-down"></i>
                            </button>

                            </div>
                        </td>
                    @* }

                    @if (DateTime.Now.Year != usuario.FechaAlta.Year)
                    { *@
                  @*       <td>
                            <div class="btn-group" role="group" aria-label="Basic Example">

                                <a class="btn btn-sm btn-outline-dark" id="btnEditar" onclick="jqGetModalModifyUser('Usuarios/ModalModificarPeriodo/@usuario.IdUsuario','Modificar Periodo de Planificacion','modificarPeriodo',@usuario.IdUsuario)">
                                    <img id="iconoEditarPeriodo" src="~/media/logoJSMGrandeBlanco.png" alt="Editar" title="Editar Periodo" />
                                </a>

                                <a class="btn btn-sm btn-outline-dark" id="btnEliminar" onclick="jqGetModalDeleteUser('Usuarios/EliminarPeriodo/@usuario.IdUsuario','Modificar Periodo de Planificacion','modificarPeriodo',@usuario.IdUsuario)">
                                    <img id="iconoEliminarPeriodo" src="~/media/logoJSMGrandeBlanco.png" alt="Editar" title="Editar Periodo" />
                                </a>
                            </div>
                        </td>
                    } *@
                </tr>
              @*   <tr class="detail-row" id="detail-@usuario.IdUsuario" style="display:none;">
                    <td colspan="12">
                        <div class="p-2 bg-light border rounded" style="background-color:dimgrey;">
                            <strong>Detalle del pedido @usuario.Nombre</strong><br />
                            Fecha Alta: @usuario.FechaAlta <br />
                            Correo: @usuario.Email
                        </div>
                    </td>
                </tr> *@
            }
        } else
        {
            <tr>
                <td colspan="7" class="text-center">
                    <span class="text-black-50 m-2">(No hay resultados que mostrar)</span>
                </td>
            </tr>
        }

    </tbody>
</table>

   <script>

    function toggleDetail(id, btn) {
        const detail = document.getElementById('detail-' + id);
        // Alterna solo la fila actual
        detail.style.display = detail.style.display === 'none' ? '' : 'none';
    }

                                    </script>



                                            <style>

    .detail-row td {
        background-color: none;
        color: black;
        border: 1px solid #444 !important; /* marco dark pero visible */
        border-top: none !important; /* evita doble borde con la fila anterior */
        box-shadow: inset 0 0 12px rgba(255, 255, 255, 0.05); /* sombreado interior sutil */
        
        padding: 12px;
        transition: all 0.7s ease;
    }
        .detail-row td:hover {
            background-color: yellow !important; /* leve cambio al pasar el ratón */
        }


    .detail-content {
        background-color: #3b3f44;
        color: #f8f9fa;
        padding: 12px;
        border-radius: 0 0 6px 6px;
        box-shadow: inset 0 0 6px rgba(255,255,255,0.05);
      
        overflow: hidden; /* ocultar contenido al cerrar */
        transition: max-height 0.3s ease; /* transición suave */
    }

                                            </style>