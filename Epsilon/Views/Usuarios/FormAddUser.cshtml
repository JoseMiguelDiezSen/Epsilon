@using Epsilon.ViewModels
@model ViewFormAgregarUsuario

<form id="addUser" method="post" asp-action="AgregarUsuario" name="addUser" onsubmit="return jqPostAddUser(this);" enctype="multipart/form-data">

    <div style="border:1px solid gainsboro;padding:10px;box-shadow: inset 0 2px 6px rgba(220,220,220,0.65);">

        <div class="text-center" style="padding:2px;border-radius:100px;margin-bottom:20px;">
            <img src="~/media/deep.jpg" alt="" height="150px" width="150px" style="border-radius:100px;border:3px solid grey;padding:3px;" name="RutaFoto" asp-for="RutaFoto" />
        </div>
        <div class="row">
            <!-- Primera columna -->
            @* NOMBRE *@
            <div class="col-md-6">
                <div class="mb-3">
                    <label class="label">Nombre</label>
                    <div class="input-group" id="inputNombre">
                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                        <input type="text" class="form-control" asp-for="Nombre" placeholder="Ingrese su nombre" style="box-shadow: inset 0 2px 6px rgba(220,220,220,0.65);">
                    </div>
                </div>

                @* CORREO ELECTRONICO *@
                <div class="mb-3">
                    <label class="label">Correo Electrónico</label>
                    <div class="input-group" id="inputCorreo">
                        <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                        <input type="email" class="form-control" asp-for="Email" placeholder="Ingrese su correo" style="box-shadow: inset 0 2px 6px rgba(220,220,220,0.65);">
                    </div>
                </div>

                @* FECHA ALTA *@
                <div class="mb-3">
                    <label class="label">Fecha de Alta</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fa-solid fa-calendar"></i></span>
                        <input type="date" asp-for="FechaAlta" class="form-control" style="box-shadow: inset 0 2px 6px rgba(220,220,220,0.65);">
                    </div>
                </div>

                @* TURNO DE TRABAJO *@
                <div class="mb-3">
                    <label class="label">Turno de Trabajo</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fa-solid fa-list-ul"></i></span>
                        <select class="form-select" asp-for="IdUsuario">
                            <option>Opción 1</option>
                        </select>
                    </div>
                </div>

                @* ACTIVO *@
                <div class="mb-3">
                    <div class="form-check">
                        <input id="checkActivo" type="checkbox" asp-for="Activo">
                        <label class="form-check-label">Activo</label>
                    </div>
                </div>
            </div>
            <!-- Segunda columna -->
            <div class="col-md-6">

                @* PASSWORD *@
                <div class="mb-3">
                    <label class="label">Password</label>
                    <div class="input-group" id="inputPassword">
                        <span class="input-group-text"><i class="fas fa-lock"></i></span>
                        <input type="password" id="Password" asp-for="Password" class="form-control" placeholder="Ingrese su contraseña" style="box-shadow: inset 0 2px 6px rgba(220,220,220,0.65);">
                        <button class="btn btn-outline-secondary" type="button" id="togglePassword" style="border:1px solid gainsboro;height:35px;">
                            <i class="fas fa-eye" style="margin-bottom:3px;"></i> <!-- Ícono de ver -->
                        </button>
                    </div>
                </div>

                @* TELEFONO *@
                <div class="mb-3">
                    <label class="label">Teléfono</label>
                    <div class="input-group" id="inputTelefono">
                        <span class="input-group-text"><i class="fas fa-phone"></i></span>
                        <input type="number" class="form-control" asp-for="Telefono" name="Telefono" placeholder="Ingrese su número de teléfono" style="box-shadow: inset 0 2px 6px rgba(220,220,220,0.65);">
                    </div>
                </div>

                @* COMENTARIOS *@ 
            <div class="mb-3">
                    <label class="label">Comentarios</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-comment"></i></span>
                        <textarea class="form-control" rows="1" placeholder="Escriba sus comentarios" name="Comentarios" id="Comentarios" style="box-shadow: inset 0 2px 6px rgba(220,220,220,0.65);"></textarea>
                    </div>
                </div>

                @* FOTO DE PERFIL *@
                <div class="mb-3">
                    <label class="label">Foto de perfil</label>
                    <div class="input-group">
                        @* <input type="file" id="foto" name="foto" accept="image/*"> *@
                        <input id="file" name="file" type="file" class="form-control" accept=".xlsx, .xls" style="box-shadow: inset 0 2px 6px rgba(220,220,220,0.65);">
                        <span class="input-group-text"><i class="fas fa-upload"></i></span>
                    </div>
                    <div id="errorMessage" style="color: red; display: none;">Por favor, suba un fichero en formato jpg.</div>
                </div>


            </div>
        </div>
    </div>
    @* BOTONES *@
    <div class="fa-pull-left pt-2">
        <button id="btnAddUser" type="submit" class="btn btn-outline-success"><span class="fa fa-check"></span> Aceptar</button>
        <button id="btnCancel" type="button" class="btn btn-outline-danger" data-bs-dismiss="modal"><span class="fa fa-circle-xmark"> </span> Cancelar</button>
    </div>


</form>

<style>

    #checkActivo {
        height: 20px;
        width: 20px;
        accent-color: orange;
        margin-left: -20px;
    }

    /* Tamaño text labels */
    label {
        font-size: 14px;
    }

    #Nombre {
        font-size: 14px;
    }

    #Password {
        font-size: 14px;
    }

    #Telefono {
        font-size: 14px;
    }

    #Email {
        font-size: 14px;
    }

    #Comentarios {
        font-size: 14px;
    }

    /* Tamaño texto controles */
    #FechaAlta {
        font-size: 14px;
    }

    #file {
        font-size: 14px;
    }

    #IdUsuario {
        font-size: 14px;
    }

</style>


<script>
    document.getElementById("togglePassword").addEventListener("click", function () {
        let passwordInput = document.getElementById("password");
        let icon = this.querySelector("i");

        // Alternar entre 'password' y 'text'
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.replace("fa-eye", "fa-eye-slash"); // Ícono de ocultar
        } else {
            passwordInput.type = "password";
            icon.classList.replace("fa-eye-slash", "fa-eye"); // Ícono de mostrar
        }
    });
</script>


@* // Script para lanzar un mensaje de error en caso de que el fichero no sea .xls o .xlsx *@
<script>
    document.getElementById("file").addEventListener("change", function (event) {
        const file = event.target.files[0]; // Obtener el archivo seleccionado
        const validExtensions = ["application/vnd.ms-excel", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];
        const inputField = event.target;

        if (file && validExtensions.includes(file.type)) {
            // Archivo válido
            inputField.classList.remove("error");
            inputField.classList.add("loaded");
            document.getElementById("errorMessage").style.display = "none";
        } else {
            // Archivo no válido
            inputField.classList.remove("loaded");
            inputField.classList.add("error");
            document.getElementById("errorMessage").style.display = "block";
            inputField.value = ""; // Reinicia el campo de entrada
        }
    });
</script>


<!-- Script : Ver / Ocultar pass -->
<script>
    document.getElementById("togglePassword").addEventListener("click", function () {
        let passwordInput = document.getElementById("Password");
        let icon = this.querySelector("i");

        // Alternar entre 'password' y 'text'
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.replace("fa-eye", "fa-eye-slash"); // Ícono de ocultar
        } else {
            passwordInput.type = "password";
            icon.classList.replace("fa-eye-slash", "fa-eye"); // Ícono de mostrar
        }
    });
</script>



