@* @model UsuariosViewModel

@{
    ViewData["Title"] = "Gestión de Usuarios";
}

@{
    await Html.RenderPartialAsync("_MensajesOperaciones");
    await Html.RenderPartialAsync("_TituloPagina");
}

<form id="idSU_Form" method="post" asp-action="FiltraUsuarios" onsubmit="return PostFiltrar(this)">
    <h4>Filtros</h4>
    <div class="form-group row">
        <div class="col-sm-2">
            <span class="has-float-label m-2">
                <input type="text" id="txtNIF" placeHolder="NIF" asp-for="Email" name="Email" ToolTip="Introduzca el NIF del usuario." MaxLength="12" class="form-control float_label" />
                <label for="txtNombre">NIF</label>
            </span>
        </div>
        <div class="col-sm-4">
            <span class="has-float-label m-2">
                <input type="text" id="txtNombre" placeHolder="Nombre" asp-for="Nombre" name="Nombre" ToolTip="Introduzca el nombre del usuario." MaxLength="75" class="form-control float_label" />
                <label for="txtNombre">Nombre</label>
            </span>
        </div>
    @*     <div class="col-sm-4">
            <select class="form-control m-2 form-select" asp-for="IdRol" asp-items="Model.Roles">
                <option value="" style="color:silver;">(Todos los roles)</option>
            </select>
        </div> *@
@*         <div class="col-sm-2">
            <select class="form-control form-select m-2" asp-for="Activo">
                <option value="" style="color:silver;">(Todos los estados)</option>
                <option value="true">Habilitado</option>
                <option value="false">Deshabilitado</option>
            </select>
        </div>
    </div>

    <button type="submit" class="btn btn-sm btn-primary m-2" style="width:100px;" onclick="if (window.PaginadorUsuarios){ PaginadorUsuarios.destroy();  delete window.PaginadorUsuarios;}"><span class="fa fa-search"></span> Buscar</button>
    <input type="hidden" asp-for="PaginaActual" id="PaginaActual" />
    <input type="hidden" asp-for="RegistrosPorPagina" id="RegistrosPorPagina" />
    <input type="hidden" name="RegistrosPaginaActual" id="RegistrosPaginaActual" value="@Model.Usuarios.Count()" />
</form>

<hr />
<br />

<h4>Resultados</h4>
<button id="AddUser" type="button" class="btn btn-sm btn-outline-primary pull-right" onclick="jqAJAXGet('GestionUsuarios/ModalAgregarUsuario',null,{modal :'#main-modal', modal_title:'Alta de Usuario'})"><span class="fa fa-plus"></span> Nuevo usuario</button>

<div id="idResultadosFiltro">
    @{
        await Html.RenderPartialAsync("TablaUsuarios", Model.Usuarios);
    }
</div>

<div id="idPaginadorUsuarios" class="text-center visually-hidden m-1">
    <a class="btn btn-sm btn-outline-secondary PaginaAnterior" onclick="PaginadorUsuarios.paginaAnterior()">Anterior</a>
    <span class="m-2 TextoPaginacion">Página @Model.PaginaActual</span>
    <a class="btn btn-sm btn-outline-secondary PaginaSiguiente" onclick="PaginadorUsuarios.paginaSiguiente()">Siguiente</a>
</div>


@section modals {
    <div class="modal fade" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" id="add-user-modal">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                </div>
            </div>
        </div>
    </div>
}

@section Scripts {
    <script src="~/js/GestionUsuarios.js" asp-append-version="true"></script>
    <script src="~/js/Paginador.js" asp-append-version="true"></script>
} *@ 